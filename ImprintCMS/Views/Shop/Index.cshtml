@model Order
@{
	ViewBag.Title = SitePhrases.MenuShop;
}
<h1>@SitePhrases.MenuShop</h1>
@if (Model == null || !Model.OrderLines.Any())
{
	<p class="empty">@SitePhrases.LabelShopEmpty</p>
}
else
{
	<ul id="basket">
		@foreach (var line in Model.OrderLines)
  {
			<li>
				@if (line.Edition.SmallCoverId != null)
	{
					<img src="@Url.Action("display", "upload", new { category = line.Edition.UploadedFile.Category, fileName = line.Edition.UploadedFile.FileName }, null)"
								class="cover"
								alt="@String.Format(SitePhrases.LabelCoverImage, line.Edition.Book.Title)"
								title="@String.Format(SitePhrases.LabelCoverImage, line.Edition.Book.Title)" />
	}
				<strong>@String.Join(" / ", line.Edition.Book.Relations.OrderBy(r => r.SequenceIdentifier).Select(r => r.PersonName)):
					<em class="title">@line.Edition.Book.Title</em></strong><br />
				@String.Format("{0}, {1}, {2}", String.Format(SitePhrases.LabelEdition, line.Edition.Number), line.Edition.Binding.Name.ToLower(), line.Edition.ReleaseDate.Year)<br />
				@Html.ActionLink(SitePhrases.LabelShopRemoveOne, "remove", new { id = line.Id })</li>
  }</ul>
	<p>@Html.ActionLink(SitePhrases.LabelShopRemoveAll, "empty")</p>
}
